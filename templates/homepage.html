{% extends 'base.html' %}
{% block content%}
<style type="text/css">
    .container-fluid {
    padding-top: 140px;
    background-size:cover;
    background-image:url("static/pexels-photo-571169.jpeg"); 
    background-position: center;
    background-repeat: no-repeat; 
    height: 800px;
}
    .subtitle {
      padding-bottom: 15px;
    }

</style>

<link href = "https://code.jquery.com/ui/1.8.23/themes/smoothness/jquery-ui.css" rel = "stylesheet">
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script src = "https://code.jquery.com/jquery-migrate-3.0.0.js"></script>

<nav class="navbar navbar-light bg-faded">
  <h1 class="navbar-brand mb-0 nav-brand">FlickrMatch</h1>
</nav>

<div class="container-fluid">
  <div class="row justify-content-center align-items-center">
    <h1>Find match through Flickr photos.</h1>
  </div>
  <div class="row justify-content-center align-items-center subtitle">
    <h5>Simply by paring Flickr usernames.</h5>
  </div>
  <form id="users" action="/userinfo" method="POST">
    <div class="form-group row justify-content-center">
      <label for="name1" class="col-md-1 col-form-label"> Player 1 </label>

      <div class="col-md-3 ui-widget">
        <input class="form-control" type="text" id = "name1" name="name1" placeholder="Preferred Name">
      </div>

      <div class="input-group col-md-4" >
        <div class="input-group-prepend">
          <div class="input-group-text">@</div>
        </div>
        <div class="ui-widget">
           <input class="form-control" id="username1" type="text" name="username1" placeholder="Flickr Username">
        </div>
      </div>
    </div>

    <div class="form-group row justify-content-center">
      <label for="name2" class="col-md-1 col-form-label"> Player 2 </label>

      <div class="col-md-3 ui-widget">
        <input class="form-control" type="text" id = "name2" name="name2" placeholder="Preferred Name">
      </div>

      <div class="input-group col-md-4" >
        <div class="input-group-prepend">
          <div class="input-group-text">@</div>
        </div>
        <div class = "ui-widget">
           <input class="form-control" id ="username2" type="text" name="username2" placeholder="Flickr Username">
        </div>
      </div>
    </div>

    <div class="row justify-content-center my-4">
      <button type="submit" id="check" class="btn btn-outline-dark btn-lg">Match</button>
    </div>
  </form>
</div>

<script>

  function showSubmition(results){
      if (results.username1_ck == 'fail' & results.username2_ck == 'fail'){
        alert("Invalid username 1 and username 2, please try again!");
        window.location.replace('/');
      }

      else if (results.username2_ck == 'fail'){
        alert("Invalid username 2, please try again!"); 
        window.location.replace('/');
      }

      else if (results.username1_ck == 'fail'){
        alert("Invalid username 1, please try again!"); 
        window.location.replace('/');
      }

      else if (results.username1_ck == 'empty' & results.username2_ck == 'empty'){
        alert("Please enter usernames!");
        window.location.replace('/');
      }

      else if (results.username2_ck == 'empty'){
        alert("Please enter Username 2!"); 
        window.location.replace('/');
      }

      else if (results.username1_ck == 'empty'){
        alert("Please enter Username 1!"); 
        window.location.replace('/');
      }

      else {
        $("#users").submit();
        console.log('success');
        }
  }
  

  function submitUsername(evt){
    evt.preventDefault();
    var formInputs = {
        "username1": $("#username1").val(),
        "username2": $("#username2").val(),
    };
    $.post("/user-check", formInputs, showSubmition);
  }

  function autoComplete() {
    var userPool = [
    'chrisimmler',
    'Alexander Lauterbach Photography',
    'Ed Post',
    'Stephen Hunt61',
    'poludziber1',
    'StephAnna :-)',];

  $( "#username1" ).autocomplete({
     source: userPool,
     autoFocus:true
  });
  
  $( "#username2" ).autocomplete({
     source: userPool,
     autoFocus:true
  });
 };

  $("#check").on("click", submitUsername);

  $('#username1').on('change keyup paste mouseup', autoComplete);
  $('#username2').on('change keyup paste mouseup', autoComplete);

</script>

{% endblock %}
